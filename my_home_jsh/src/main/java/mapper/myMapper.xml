<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mapper.myMapper">
	<select id="getItemCount" resultType="Integer">
		select count(*) as cnt from user_item
	</select>
	<select id="getItemList" resultType="model.Item" parameterType="model.Condition">
		select * from
			(select a.*, rownum rn from
				(select * from user_item order by code desc ) a
			)
		where rn between #{startRow} and #{endRow}
	</select>
	<insert id="putItem" parameterType="model.Item">
		insert into user_item values(#{code},#{name},#{price},#{info},#{origin})
	</insert>
	
	
	<!-- TODO : error query -->
	<select id="getNoticeList" resultType="model.Notice" parameterType="model.Condition">
		select notice_seqno,notice_title,notice_content,notice_writer,notice_regist_date from
		(
		select a.*,
		rownum rn from
		(
		(select * from user_notice order by notice_seqno desc) a
		)
		)where rn
		between #{startRow} and #{endRow}
	</select>
	<select id="getNoticeDetail" resultType="model.Notice" parameterType="Integer">
		select * from user_notice where notice_seqno = #{notice_seqno}
	</select>
	<select id="getNoticeCount" resultType="Integer">
		select count(*) as num from user_notice
	</select>
	<insert id="putNotice" parameterType="model.Notice">
		insert into user_notice
		values(#{notice_seqno}, #{notice_title}, #{notice_content}, #{notice_writter}, #{notice_regist_date})
	</insert>
	<select id="getMaxNoticeId" resultType="Integer">
		select max(notice_seqno) as max_id from user_notice
	</select>
	<select id="getBBSDetail" resultType="model.Bbs" parameterType="Integer">
		select * from bbs where seqno=#{seqno}
	</select>
	<select id="getBBSCount" resultType="Integer">
		select count(*) as num from bbs
	</select>
	<select id="getBBSList" resultType="model.Bbs" parameterType="model.Condition">
		select seqno,title,id,content,bbs_date from
		(
		select a.*,
		rownum rn from
		(
		(select * from bbs order by seqno desc) a
		)
		)where rn
		between #{startRow} and #{endRow}
	</select>

	<insert id="putBBS" parameterType="model.Bbs">
		insert into bbs
		values(#{seqno},#{title},#{content},
		#{id},#{bbs_date})
	</insert>
	<select id="getMaxBbsId" resultType="Integer">
		select max(seqno) as max_id
		from bbs
	</select>
	<insert id="putUser" parameterType="model.User">
		insert into
		user_account(user_id,user_name,password,
		email,job,gender)
		values(#{user_id},#{user_name},
		#{password},#{email},#{job},#{gender})
	</insert>
	<select id="checkId" parameterType="String" resultType="Integer">
		select
		count(*) as cnt from user_account
		where user_id = #{id}
	</select>
	<select id="getPassword" resultType="String"
		parameterType="String">
		select password from user_account where user_id=#{id}
	</select>
	<select id="getUser" resultType="model.User"
		parameterType="String">
		select * from user_account where user_id=#{id}
	</select>
</mapper>






